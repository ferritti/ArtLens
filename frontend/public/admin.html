<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>ArtLens — Admin</title>
  <link rel="stylesheet" href="styles/variables.css" />
  <link rel="stylesheet" href="styles/base.css" />
  <link rel="stylesheet" href="styles/animations.css" />
  <link rel="stylesheet" href="styles/layout.css" />
  <link rel="stylesheet" href="styles/components.css" />
  <link rel="stylesheet" href="styles/detail.css" />
  <style>
    /* Allow scrolling on admin page overriding global hidden overflow */
    html, body { overflow: auto !important; height: auto !important; }
  </style>
</head>
<body>
  <main class="stage" id="admin">
    <div class="topbar">
      <div class="brand">ArtLens <span class="badge">Admin</span></div>
      <div class="actions">
        <a href="./index.html"><button type="button" title="Apri App">Apri App</button></a>
      </div>
    </div>

    <div class="hud">
      <div class="card">
        <div>
          <div class="card-title">Nuova Opera</div>
          <div class="subtitle">Le immagini restano sul tuo dispositivo: vengono usate solo per calcolare gli embedding nel browser.</div>
        </div>

        <form id="f" class="form">
          <div class="subtitle">L'ID verrà generato automaticamente dal titolo.</div>
          <label>Titolo
            <input name="title" placeholder="Titolo dell'opera" />
          </label>
          <label>Autore
            <input name="artist" placeholder="Nome autore" />
          </label>
          <label>Anno
            <input name="year" placeholder="es. 1620 ca." />
          </label>
          <label>Museo
            <input name="museum" placeholder="es. Uffizi" />
          </label>
          <label>Location
            <input name="location" placeholder="Sala/Collocazione" />
          </label>
          <label>Descrizione IT
            <textarea name="desc_it" placeholder="Descrizione in italiano"></textarea>
          </label>
          <label>Descrizione EN
            <textarea name="desc_en" placeholder="Description in English"></textarea>
          </label>
          <label>Immagini (usate solo localmente per gli embedding)
            <input type="file" name="images" accept="image/*" multiple required />
            <small class="subtitle">Puoi selezionare più immagini per la stessa opera.</small>
          </label>

          <div class="actions">
            <button id="submitBtn" type="submit">Calcola embedding e salva</button>
          </div>
          <div id="statusMsg" class="status"></div>
        </form>
      </div>
    </div>
  </main>

  <!-- Configure backend URL (must be before module to match frontend) -->
  <script>window.BACKEND_URL='https://artlens-obss.onrender.com';</script>
  <!-- TensorFlow.js and MobileNet -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.20.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/mobilenet@2.1.0"></script>
  <!-- Admin logic -->
  <script type="module" src="../src/js/admin.js"></script>
</body>
</html>
